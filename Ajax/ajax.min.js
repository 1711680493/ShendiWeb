/**
 * 封装了对 ajax 的操作
 * ajax v1.0 (https://1711680493.github.io)
 * changed in 2021-1-3
 * @author Shendi
 */
var ajax={xhr:function(){return window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},req:function(a,b,c,d,e,f){var g=ajax.xhr();g.withCredentials=1==f,null!=c&&(g.onreadystatechange=function(){4==g.readyState&&c(g.responseText,g.status,g)}),g.open(a,b,null==d?!0:d),g.send(e)},post:function(a,b,c,d,e){var f=ajax.xhr();f.withCredentials=1==e,null!=c&&(f.onreadystatechange=function(){4==f.readyState&&c(f.responseText,f.status,f)}),f.open("POST",a,null==d?!0:!1),f.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f.send(b)},$:function(a){function m(){if("POST"==c.toUpperCase())if(g){for(r in g)if("CONTENT-TYPE"==r.toUpperCase())return;k=!0}else k=!0}var f,g,h,i,k,l,n,o,p,q,r,b=ajax.xhr(),c="GET",d="",e=!0;if(null!=a){if(a.type&&(c=a.type),a.url&&(d=a.url),e=null==e?!0:a.async,a.uname&&(h=a.uname),a.pwd&&(i=a.pwd),f=a.param,a.heads&&(g=a.heads),b.withCredentials=a.crossDomain?a.crossDomain:!0,a.timeout&&a.async&&(b.timeout=a.timeout),a.respType&&(b.responseType=a.respType),l="POST"!=c.toUpperCase(),f)if("object"!=typeof f||"[object object]"!=Object.prototype.toString.call(f).toLowerCase()||f.length)"string"==typeof f&&m();else{if(o=Object.keys(f),o.length>0)for(n=o[0]+"="+f[o[0]],p=1;p<o.length;p++)if(q=f[o[p]],"[object Array]"==Object.prototype.toString.call(q).toLowerCase()){r=o[p];for(j in q)n+="&"+r+"="+q[j]}else n+="&"+o[p]+"="+q;f=n,m()}b.onreadystatechange=function(){a.callback&&a.callback(b),4==b.readyState&&(a.finish&&a.finish(b.responseText,b.status,b),a.error&&b.status>=500&&a.error(b.responseText,b.status,b.statusText,b))},a.netErr&&(b.onerror=function(c){a.netErr(b,c)}),a.ontimeout&&(b.ontimeout=function(c){a.ontimeout(b,c)}),b.onload=function(){!a.success||200!=b.status&&304!=b.status||a.success(b.responseText,b.status,b),a.onload&&a.onload(b.responseText,b.status,b)},a.down&&(b.onprogress=function(c){a.down(c,b)}),a.up&&(b.upload.onprogress=function(c){a.up(c.loaded,c.total,c.lengthComputable,c,b)})}try{if(l?(b.open(c,d+"?"+f,e,h,i),f=null):b.open(c,d,e,h,i),k&&b.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g)for(r in g)b.setRequestHeader(r,g[r]);b.send(f)}catch(s){console.log("ajax error: "+s)}}};